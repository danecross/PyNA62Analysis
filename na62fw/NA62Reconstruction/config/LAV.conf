### LAV configuration file ###

######################## Common parameters to all the subdetectors ########################
#
# The following parameters are read by NA62VReconstruction::ParseConfigFile
#

# Data source ID as specified in "NA62 Data Formats": 8-bit identifier specifying the sub-detector generating the data
# expressed in hexadecimal
DetID= 0x10

# Total number of stations
NStations= 12

# Total number of channels
NChannels= 4992

# Enable (1) or disable (0) T0 and StationsT0
EnableStationsT0= 1
EnableTriggerDriftT0= 1
EnableROMezzaninesT0= 1
EnableT0= 1

#The following configuration holds for both the MC and the data
ROMezzaninesT0FileInput= LAV-CoarseT0.dat
T0FileInput= LAV-T0.dat

# Enable (1) or disable (0) histograms for T0 evaluation
# bit 0: T0 histo (to cross-check T0 evaluation)
# bit 1: NoT0 histo (to evaluate fineT0s)
# bit 2: PrimNoT0 histo (to evaluate fineT0s for L0)
T0HistoMask= 7

# Enable (1) or disable (0) histograms for individual channels (time, width, slewing)
EnableChannelHistograms= 0

# header text file output by encoding to be used in input for L1 trigger tests
# this will contain the recipe to process the binary file: 
# general info - binary filename, sub-detector ID, number of readout boards, number of processed events
# event-based info - event length, event timestamp, event length per readout board
HeaderFileName= LAV_header.txt   
  
# raw binary file output by encoding to be used in input for L1 trigger tests (together with header text file) 
# this will contain the event data block as specified in "NA62 Data Formats"
BinaryFileName= LAV.dat

# ------------------------------- Digitizer configuration ------------------------------- #
# Station MC ToF (ns) [one value for each station - Reference for Layer0]
StationsMCToF= 417.883 443.067 468.444 493.904 519.183 564.423 589.324 614.583 655.845 690.379 738.707 808.153
MCStationsToFLayer 1 0.1976 0.2337 0.1893 0.2096 0.2752 0.3170 0.3290 0.2342 0.2232 0.2444 0.2182 0.3442
MCStationsToFLayer 2 0.5906 0.5772 0.4901 0.4997 0.5678 0.6800 0.5759 0.4891 0.6158 0.4864 0.4705 0.6482
MCStationsToFLayer 3 0.9962 0.9715 0.8620 0.8482 0.8782 1.0967 0.9475 0.8286 1.0733 0.8373 0.7929 0.9718
MCStationsToFLayer 4 1.4919 1.4374 1.2771 1.2399 1.2668 1.5466 1.3443 1.2304 0 0 0 0

# ----------------------------- Online Monitor configuration ---------------------------- #
# Set the number of bursts after which the OM histos are reset 
# If the value is <=0 the OM histos are never reset
OnlineMonitorAccumulation= 1

################################### LAV Reconstruction ####################################

# Methods for threshold: 
# Method = 1--> use hard-coded values 
# Method = 2--> use station-by-station values from user input 
# Method = 3--> use block-by-block values in the input file provided 
# Method = 4--> retrieve values from db (to be implemented)
# Method = 5--> retrieve values from hardcoded table (to be implemented)
ThresholdReadMethod 2
ThresholdNominalValues 0.005 0.015 0.00125
#ThresholdReadMethod 3
#ThresholdInputFileName ThresholdFileNamePath

# Methods for T0: 
# Method = 1--> use hard-coded values 
# Method = 2--> use station-by-station values from user input 
# Method = 3--> use block-by-block values in the input file provided 
# Method = 4--> retrieve values from db (to be implemented)
#
T0ReadMethod 3

# Switch to define the preferred algorithm for nominal slewing corrections: 0 --> prefer slope; 1 --> prefer tot_low; 2 --> prefer tot_high
PreferredTimeAlgorithm 0
# Switch to apply residual slewing correction (parameters should be stored in the T0 file)
ApplyLAVSlewingCorrections 1
# Input for Data Slewing correction parameters
LAVDataSlewingCorrectionParameters 4.576 -3.30 0.9678 1.027 -0.04063 0.03829 -2.839 2.599 -0.942
# Input for MC Slewing correction parameters
LAVMCSlewingCorrectionParameters 2.1590 2.355 8.503 4.806 1.098 -0.716 -0.3125 6.624 -5.469
# Switch to apply clustering of adjacent fired blocks
MakeLAVClusters 1
# Switch to apply clustering of blocks close in phi and time
MakeLAVTracks 1

# RawDecoder channel mapping and other relevant parameters
RawDecoderSettingsFileInput= LAV-RawDecoderSettings.dat
